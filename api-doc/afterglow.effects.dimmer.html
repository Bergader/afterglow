<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects.dimmer documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Afterglow</span> <span class="project-version">0.2.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.beyond.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beyond</span></div></a></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push-2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push-2</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mini.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mini</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mk2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mk2</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-pro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-pro</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.tempo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempo</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.coremidi4j.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coremidi4j</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.cues.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cues</span></div></a></li><li class="depth-3 branch current"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-3"><a href="afterglow.effects.show-variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-variable</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.american-dj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>american-dj</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.qxf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qxf</span></div></a></li><li class="depth-2 branch"><a href="afterglow.init.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shows</span></div></div></li><li class="depth-3"><a href="afterglow.shows.sallie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sallie</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="afterglow.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.show-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-control</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.web-repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web-repl</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.dimmer.html#var--.3EMaster"><div class="inner"><span>-&gt;Master</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-dimmer-channel.3F"><div class="inner"><span>dimmer-channel?</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-dimmer-effect"><div class="inner"><span>dimmer-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-gather-dimmer-channels"><div class="inner"><span>gather-dimmer-channels</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-gather-no-dimmer-rgb-heads"><div class="inner"><span>gather-no-dimmer-rgb-heads</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-gather-partial-dimmer-function-heads"><div class="inner"><span>gather-partial-dimmer-function-heads</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-IDimmerMaster"><div class="inner"><span>IDimmerMaster</span></div></a></li><li class="depth-2 branch"><a href="afterglow.effects.dimmer.html#var-master-get-level"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>master-get-level</span></div></a></li><li class="depth-2 branch"><a href="afterglow.effects.dimmer.html#var-master-scale"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>master-scale</span></div></a></li><li class="depth-2"><a href="afterglow.effects.dimmer.html#var-master-set-level"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>master-set-level</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-map-.3EMaster"><div class="inner"><span>map-&gt;Master</span></div></a></li><li class="depth-1"><a href="afterglow.effects.dimmer.html#var-master"><div class="inner"><span>master</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">afterglow.effects.dimmer</h1><div class="doc"><div class="markdown"><p>Effects pipeline functions for working with dimmer channels for fixtures and heads. Dimmer effects are always tied to a <em>master</em> chain, which can scale back the maximum allowable value for that dimmer channel, as a percentage. Unless otherwise specified, the dimmer cue will be attached to the show grand master, but you can create other masters to adjust the brightness of groups of fixtures, perhaps because they are intrinsically brighter, or to adjust the balance of lighting for artistic reasons. Secondary masters can be chained to each other, and are always chained to the show grand master, so turning that down will dim the entire show; setting it to zero will black out the show.</p>
<p>This master scaling capability is so useful that you will almost always want a prominent fader on a MIDI controller tied to the show grand master, and possibly others to secondary masters. <a href="afterglow.show.html#var-add-midi-control-to-master-mapping">show/add-midi-control-to-master-mapping</a> makes that easy, especially for the grand master, and for submasters stored in show variables, which can be referred to by their keywords.</p>
<p>Some fixtures have damping functions that slow down their dimmer response, so you may not get the kind of coordination you would like from oscillated dimmer cues. A potential workaround is to use the dimmer channels as a maximum brightness level to allow tweaking the overall brightness of an effect, and using the lightness attribute of a color cue to create time-varying brightness effects.</p></div></div><div class="public anchor" id="var--.3EMaster"><h3>-&gt;Master</h3><div class="usage"><code>(-&gt;Master level parent)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class afterglow.effects.dimmer.Master.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L100">view source</a></div></div><div class="public anchor" id="var-dimmer-channel.3F"><h3>dimmer-channel?</h3><div class="usage"><code>(dimmer-channel? c)</code></div><div class="doc"><div class="markdown"><p>Returns true if the supplied channel is a dimmer.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L46">view source</a></div></div><div class="public anchor" id="var-dimmer-effect"><h3>dimmer-effect</h3><div class="usage"><code>(dimmer-effect level fixtures &amp; {:keys [htp? master effect-name add-virtual-dimmers?], :or {htp? true, master (:grand-master *show*)}})</code></div><div class="doc"><div class="markdown"><p>Returns an effect which assigns a dynamic value to all the supplied dimmers. If a <code>true</code> value is passed for <code>:htp?</code>, applies <em>highest-takes-precedence</em> (i.e. compares the value to the previous assignment for the channel, and lets the highest value remain).</p>
<p>All dimmer cues are associated with a <a href="afterglow.effects.dimmer.html#var-master">master</a> chain which can scale down the values to which they are set. If none is supplied when creating the dimmer cue, the show’s grand master is used.</p>
<p>Dimmers are either a channel fully dedicated to dimming, identified by the channel <code>:type</code> of <code>:dimmer</code>, or a dimmer function range defined over only part of a multi-purpose channel, where the function <code>:type</code> is <code>:dimmer</code>, and the channel <code>:type</code> must be something else. A single head cannot have both types of dimmer, since a function can only exist on one channel in a given head.</p>
<p>If you have any fixtures that are capable of RGB color mixing, but lack dedicated dimmer channels, you can have this effect simulate a dimmer channel for those fixtures by passing a <code>true</code> value with <code>add-virtual-dimmers?</code>. The virtual dimmer works by modifying any color effect that has already run for those fixtures, to reduce the brightness of the color being assigned. To do that, this dimmer effect needs to run at a higher effect priority than any color effect you want it to modify, so be sure to add it to your show with an appropriate priority value. Virtual dimmers are incompatible with hightest-takes-precedence dimming, because there is no actual previous dimmer value for them to work with, so you cannot use both <code>htp?</code> and <code>add-virtual-dimmers</code> at the same time.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L166">view source</a></div></div><div class="public anchor" id="var-gather-dimmer-channels"><h3>gather-dimmer-channels</h3><div class="usage"><code>(gather-dimmer-channels fixtures)</code></div><div class="doc"><div class="markdown"><p>Finds all channels in the supplied fixture list which are dimmers, even if they are inside heads.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L51">view source</a></div></div><div class="public anchor" id="var-gather-no-dimmer-rgb-heads"><h3>gather-no-dimmer-rgb-heads</h3><div class="usage"><code>(gather-no-dimmer-rgb-heads fixtures)</code></div><div class="doc"><div class="markdown"><p>Finds all the RGB heads from the supplied fixture list which have no dimmer capability at either the head or fixture level. These heads are suitable for creating virtual dimmer effects when desired.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L67">view source</a></div></div><div class="public anchor" id="var-gather-partial-dimmer-function-heads"><h3>gather-partial-dimmer-function-heads</h3><div class="usage"><code>(gather-partial-dimmer-function-heads fixtures)</code></div><div class="doc"><div class="markdown"><p>Find all heads in the supplied fixture list which contain multipurpose channels that are partially used for dimming, rather than full dedicated dimmer channels.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L58">view source</a></div></div><div class="public anchor" id="var-IDimmerMaster"><h3>IDimmerMaster</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A chainable limiter of dimmer cues.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-master-get-level"><h3>master-get-level</h3><div class="usage"><code>(master-get-level master)</code></div><div class="doc"><div class="markdown"><p>Get the level of this master, as a percentage from 0 to 100. Any value less than 100 will cause the dimmer cues attached to this master to have their levels scaled back by that amount. If there are any parent masters attached to this one, they may further scale back the value in turn.</p></div></div></div><div class="public anchor" id="var-master-scale"><h3>master-scale</h3><div class="usage"><code>(master-scale master value)</code></div><div class="doc"><div class="markdown"><p>Scale down the value being sent to a dimmer according to this master level, and any parent masters associated with it.</p></div></div></div><div class="public anchor" id="var-master-set-level"><h3>master-set-level</h3><div class="usage"><code>(master-set-level master new-level)</code></div><div class="doc"><div class="markdown"><p>Set the level of this master, as a percentage from 0 to 100. Any value less than 100 will cause the dimmer cues attached to this master to have their levels scaled back by that amount. If there are any parent masters attached to this one, they may further scale back the value in turn.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L82">view source</a></div></div><div class="public anchor" id="var-map-.3EMaster"><h3>map-&gt;Master</h3><div class="usage"><code>(map-&gt;Master m__6522__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class afterglow.effects.dimmer.Master, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L100">view source</a></div></div><div class="public anchor" id="var-master"><h3>master</h3><div class="usage"><code>(master show &amp; {:keys [level parent], :or {level 100, parent (:grand-master show)}})</code></div><div class="doc"><div class="markdown"><p>Create a master for scaling dimmer cues. If you set its level to less than 100 (interpreted as a percentage), all dimmer cues created with this master will be scaled back appropriately. If you supply a parent master, it will get a chance to scale them back as well. If you don’t, the show’s grand master is used as the parent master.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/dimmer.clj#L112">view source</a></div></div></div></body></html>