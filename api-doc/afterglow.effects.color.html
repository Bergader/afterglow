<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects.color documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Afterglow</span> <span class="project-version">0.2.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.beyond.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beyond</span></div></a></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mini.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mini</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mk2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mk2</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-pro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-pro</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.tempo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempo</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.coremidi4j.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coremidi4j</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch current"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.cues.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cues</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-3"><a href="afterglow.effects.show-variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-variable</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.american-dj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>american-dj</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.qxf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qxf</span></div></a></li><li class="depth-2 branch"><a href="afterglow.init.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shows</span></div></div></li><li class="depth-3"><a href="afterglow.shows.sallie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sallie</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="afterglow.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.show-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-control</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.web-repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web-repl</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.color.html#var-build-htp-color-assigner"><div class="inner"><span>build-htp-color-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-build-htp-color-assigners"><div class="inner"><span>build-htp-color-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-build-saturation-transformation"><div class="inner"><span>build-saturation-transformation</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-color-effect"><div class="inner"><span>color-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-fade-colors"><div class="inner"><span>fade-colors</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-htp-merge"><div class="inner"><span>htp-merge</span></div></a></li><li class="depth-1"><a href="afterglow.effects.color.html#var-transform-colors"><div class="inner"><span>transform-colors</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">afterglow.effects.color</h1><div class="doc"><div class="markdown"><p>Effects pipeline functions for working with color assignments to fixtures and heads.</p></div></div><div class="public anchor" id="var-build-htp-color-assigner"><h3>build-htp-color-assigner</h3><div class="usage"><code>(build-htp-color-assigner head param show snapshot)</code></div><div class="doc"><div class="markdown"><p>Returns an assigner that applies highest-takes-precedence color mixing of a dynamic color parameter to the supplied head or fixture. If the parameter is not frame-dynamic, it gets resolved when creating this assigner. Otherwise, resolution is deferred to frame rendering time. At that time, both the previous assignment and the current parameter are resolved, and the red, green, and blue values of the color are set to whichever of the previous and current assignment held the highest.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L32">view source</a></div></div><div class="public anchor" id="var-build-htp-color-assigners"><h3>build-htp-color-assigners</h3><div class="usage"><code>(build-htp-color-assigners heads param show)</code></div><div class="doc"><div class="markdown"><p>Returns a list of assigners which apply highest-takes-precedence color mixing to all the supplied heads or fixtures.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L51">view source</a></div></div><div class="public anchor" id="var-build-saturation-transformation"><h3>build-saturation-transformation</h3><div class="usage"><code>(build-saturation-transformation &amp; {:keys [param], :or {param (osc/build-oscillated-param (osc/sawtooth :down? true) :max 100)}})</code></div><div class="doc"><div class="markdown"><p>Creates a color transformation for use with <a href="afterglow.effects.color.html#var-transform-colors">transform-colors</a> which changes the saturation based on a variable parameter. If no parameter is supplied, the default is to use an oscillated parameter based on <a href="null">sawtooth-beat</a> with <code>:down?</code> set to <code>true</code> so the color is fully saturated at the start of the beat, and fully desaturated by the end. A different pattern can be created by supplying a different parameter with the <code>:param</code> optional keyword argument.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L151">view source</a></div></div><div class="public anchor" id="var-color-effect"><h3>color-effect</h3><div class="usage"><code>(color-effect name color fixtures &amp; {:keys [include-color-wheels? htp?]})</code></div><div class="doc"><div class="markdown"><p>Returns an effect which assigns a color parameter to all heads of the fixtures supplied when invoked. If <code>:include-color-wheels?</code> is passed with a <code>true</code> value, then fixtures which use color wheels are included, otherwise only color-mixing fixtures are included. If <code>:htp?</code> is passed with a <code>true</code> value, highest-takes-precedence assignment is used with the red, green, and blue color values to blend this color with any previous color that might have been assigned to the affected fixtures.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L58">view source</a></div></div><div class="public anchor" id="var-fade-colors"><h3>fade-colors</h3><div class="usage"><code>(fade-colors from to fraction show snapshot target)</code></div><div class="doc"><div class="markdown"><p>Calculate a weighted HSL blend between two colors, which may be dynamic parameters, and where nil is considered to be a fully darkened version of the other side of the fade.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L128">view source</a></div></div><div class="public anchor" id="var-htp-merge"><h3>htp-merge</h3><div class="usage"><code>(htp-merge previous current)</code></div><div class="doc"><div class="markdown"><p>Helper function for assigners that want to use highest-takes-priority blending for RGB colors. Returns a color that contains the highest red component from the two input colors, the highest green component, and the highest blue component.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L19">view source</a></div></div><div class="public anchor" id="var-transform-colors"><h3>transform-colors</h3><div class="usage"><code>(transform-colors fixtures &amp; {:keys [transform-fn beyond-server], :or {transform-fn (build-saturation-transformation), beyond-server nil}})</code></div><div class="doc"><div class="markdown"><p>Creates an effect which modifies any effect that is currently assigning a color to the supplied fixtures. Needs to be assigned a higher priority than any effects it should transform, so that it will run after them. The actual transformation is implemented by a function which takes a color, show, snapshot, and head, and returns a transformed color. This function is specified with the <code>:transform-fn</code> optional keyword argument; if none is specified, <a href="afterglow.effects.color.html#var-build-saturation-transformation">build-saturation-transformation</a> is called with no arguments to create one which causes the saturation of the color to range from full at the start of each beat to none at the end.</p>
<p>If the optional keyword argument <code>:beyond-server</code> is passed with a Beyond server (as returned by <a href="afterglow.beyond.html#var-beyond-server">beyond-server</a>), any color being sent to that integrated laser show using <a href="afterglow.beyond.html#var-laser-color-effect">laser-color-effect</a> will also be transformed.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/color.clj#L164">view source</a></div></div></div></body></html>