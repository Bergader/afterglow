<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects.cues documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Afterglow</span> <span class="project-version">0.2.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.beyond.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beyond</span></div></a></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-pro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-pro</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.tempo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempo</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.coremidi4j.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coremidi4j</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch current"><a href="afterglow.effects.cues.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cues</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-3"><a href="afterglow.effects.show-variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-variable</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.american-dj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>american-dj</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.qxf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qxf</span></div></a></li><li class="depth-2 branch"><a href="afterglow.init.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shows</span></div></div></li><li class="depth-3"><a href="afterglow.shows.sallie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sallie</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="afterglow.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.show-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-control</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.web-repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web-repl</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.cues.html#var-add-midi-control-to-cue-mapping"><div class="inner"><span>add-midi-control-to-cue-mapping</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-code-cue"><div class="inner"><span>code-cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-compound-cues-effect"><div class="inner"><span>compound-cues-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-cue"><div class="inner"><span>cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-find-cue-variable-keyword"><div class="inner"><span>find-cue-variable-keyword</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-function-cue"><div class="inner"><span>function-cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-get-cue-variable"><div class="inner"><span>get-cue-variable</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-remove-midi-control-to-cue-mapping"><div class="inner"><span>remove-midi-control-to-cue-mapping</span></div></a></li><li class="depth-1"><a href="afterglow.effects.cues.html#var-set-cue-variable.21"><div class="inner"><span>set-cue-variable!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">afterglow.effects.cues</h1><div class="doc"><div class="markdown"><p>Cues provide a user interface for controlling effects, by associating them with cells in a cue grid so they can be easily triggered and monitored, either through a physical grid controller, or the web show control interface. They also provide a way of binding cue variables to effect parameters, which can enable controller interfaces to adjust them, and of tying those variables to velocity and pressure sensitivity on physical grid controllers which have such capabilities.</p></div></div><div class="public anchor" id="var-add-midi-control-to-cue-mapping"><h3>add-midi-control-to-cue-mapping</h3><div class="usage"><code>(add-midi-control-to-cue-mapping device-filter channel kind note x y &amp; {:keys [feedback-on feedback-off use-velocity? momentary?], :or {feedback-on 127, feedback-off 0, momentary? true}})</code></div><div class="doc"><div class="markdown"><p>Cause the specified cue from the <a href="afterglow.show-context.html#var-*show*">*show*</a> cue grid to be triggered by receipt of the specified note (when <code>kind</code> is <code>:note</code>) or controller-change (when <code>kind</code> is <code>:control</code>) message with a non-zero velocity or control value. This allows generic MIDI controllers, which do not have enough pads or feedback capabilities to act as a full grid controller like the Ableton Push, to still provide a physical means of triggering cues.</p>
<p>The device to be mapped is identified by <code>device-filter</code>. The first input port which matches using <a href="afterglow.midi.html#var-filter-devices">filter-devices</a> will be used.</p>
<p>The desired cue is identified by passing in its <code>x</code> and <code>y</code> coordinates within the show cue grid.</p>
<p>Afterglow will attempt to provide feedback about the progress of the cue by sending note on/off or control-change values to the same controller when the cue starts and ends. The note velocities or control values used can be changed by passing in different values with <code>:feedback-on</code> and <code>:feedback-off</code>, and this behavior can be suppressed entirely by passing <code>false</code> with <code>:feedback-on</code>.</p>
<p>If the controller is pressure-sensitive and you would like to have the velocity information passed on to any cue variables which are configured to respond to it, pass <code>true</code> with <code>use-velocity?</code>. Doing this also enables responsiveness to aftertouch messages, which can adjust the cue variable for as long as you are holding down the key or pad, if your controller sends them (and <code>kind</code> is <code>:note</code>).</p>
<p>Afterglow assumes the control is momentary, meaning it sends a note off (or control value of 0) as soon as it is released, and a second press will be used to end the cue unless the cue uses the <code>:held</code> modifier to indicate it should be ended when the button is released. If your controller does not have momentary buttons and already requires a second press to turn off the note or control value, pass <code>false</code> with <code>:momentary?</code> and Afterglow will always end cues when it receives a control value of 0, even if cues are not marked as <code>:held</code>.</p>
<p>Returns the cue-triggering function which can be passed to <a href="afterglow.effects.cues.html#var-remove-midi-control-to-cue-mapping">remove-midi-control-to-cue-mapping</a> if you ever want to stop the MIDI control or note from affecting the cue in the future.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L361">view source</a></div></div><div class="public anchor" id="var-code-cue"><h3>code-cue</h3><div class="usage"><code>(code-cue code label &amp; {:keys [color], :or {color :white}})</code></div><div class="doc"><div class="markdown"><p>Creates a cue that runs an arbitrary chunk of Clojure code instead of starting an effect, for example to reset the metronome if the controller mapping doesn&rsquo;t have a dedicated button for doing that.</p>
<p>The <code>code</code> argument must be a function that takes two arguments. It will be called with the show and metronome snapshot when the cue is started, and should return immediately, because this takes place on the effect rendering pipeline, so any lengthy operations must be performed on another thread. The effect won&rsquo;t do anything else after calling <code>code</code> once, but the cue is configured to keep it &ldquo;running&rdquo; until you let go of that grid controller pad, so you can see visual feedback that it ran.</p>
<p>The <code>label</code> argument is a string which is used to identify the cue in the cue grid.</p>
<p>The optional keyword argument <code>:color</code> requests that the web interface and control surfaces draw the cue using the specified color rather than the default white to help the user identify it. This is only a request, as not all control surfaces support all (or any) colors. The color is passed to <a href="afterglow.effects.params.html#var-interpret-color">interpret-color</a>, so it can be specified in a variety of ways.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L267">view source</a></div></div><div class="public anchor" id="var-compound-cues-effect"><h3>compound-cues-effect</h3><div class="usage"><code>(compound-cues-effect name show cues)</code></div><div class="doc"><div class="markdown"><p>Creates an effect which launches the specified cues from the grid, stays running as long as they are, and ends them all when it is asked to end. Takes a list of three-element tuples identifying the x and y coordinates within the cue grid of the subordinate cues to launch, and an optional map of cue variable overrides, which can be used to change the initial values of any temporary variables introduced by that cue.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L240">view source</a></div></div><div class="public anchor" id="var-cue"><h3>cue</h3><div class="usage"><code>(cue show-key effect-fn &amp; {:keys [short-name color end-keys priority held variables], :or {short-name (:name (effect-fn {})), color :white, priority 0}})</code></div><div class="doc"><div class="markdown"><p>Creates a cue for managing in a cue grid. <code>show-key</code> will be used  as the effect keyword when the cue is triggered to add it to a show,  ending any existing effect that was using that key. <code>effect-fn</code> is a  function that will be called to obtain the effect to be started and  monitored when this cue is triggered. It will be passed a map  allowing lookup of any temporary variables introduced by the  cue (see the <code>:variables</code> parameter below).</p>
<p>If supplied, <code>:short-name</code> identifies a compact, user-oriented name  to be displayed in the web interface or controller display (if it  has one) to help identify the cue, which can be helpful if the name  of the underlying effect is ambiguous or overly long.</p>
<p><code>:color</code> requests that the web interface and control surfaces draw  the cue using the specified color rather than the default white to  help the user identify it. This is only a request, as not all  control surfaces support all (or any) colors. The color is passed  to <a href="afterglow.effects.params.html#var-interpret-color">interpret-color</a>, so it can be specified in a variety of ways.</p>
<p><code>:end-keys</code> introduces a sequence of keywords identifying other  effects which should be ended whenever this one is started. This  allows a set of grid cues to be set up as mutually exclusive, even  if they use different keywords within the show for other reasons.</p>
<p><code>:priority</code> assigns a sorting priority to the effect. If not  assigned, a default priority of zero is used. The effect will be  added to the show after any effects of equal or lower priority, but  before any with higher priority. Effects are run in order, and later  effects can override earlier ones if they are trying to affect the  same things, so a higher priority and more recent effect wins.</p>
<p>If <code>:held</code> is passed with a true value, then the cue will be active  only as long as the corresponding pad or button on the control  surface is held down, for controllers which support this feature.  This can be useful for very intense cues like strobes. Show  operators can override the <code>:held</code> flag by holding down the <code>Shift</code>  key when triggering the cue on interfaces which have <code>Shift</code> keys,  like the web interface and Ableton Push.</p>
<p><code>:variables</code> introduces a list of variable bindings for the cue,  each of which is a map with the following keys:</p>
<ul>
  <li>
  <p><code>:key</code> identifies the variable that is being bound by the cue (for easy  adjustment in the user interface while the cue is running). If it is  a string rather than a keyword, it identifies a temporary variable  which need exist only for the duration of the cue. The actual name  will be assigned when the cue is activated. In order for <code>effect-fn</code>  to be able to access the correct variable, it is passed a map  whose keys are keywords made from the string <code>:key</code> values supplied  in the <code>:variables</code> list, and whose values are the actual keyword  of the corresponding temporary show variable created for the cue.</p></li>
  <li>
  <p><code>:name</code>, if present, gives the name by which the variable should be  displayed in the user interface for adjusting it. If not specified,  the name of <code>:key</code> is used.</p></li>
  <li>
  <p><code>:short-name</code>, if present, is a shorter version of the name which  can be used in interfaces with limited space.</p></li>
  <li>
  <p><code>:min</code> specifies the minimum value to which the variable can be set.  If not supplied, zero is assumed.</p></li>
  <li>
  <p><code>:max</code> specifies the maximum value to which the variable can be set.  If not supplied, 100 is assumed.</p></li>
  <li>
  <p><code>:start</code> specifies the value to assign to the variable at the  start of the cue, if any. This is honored only for temporary  variables introduced for the cue, in other words when <code>:key</code> is  given with a string rather than a keyword.</p></li>
  <li>
  <p><code>:type</code> identifies the type of the variable, to help formatting  its display. Supported values are <code>:integer</code>, <code>:float</code>, possibly  others in the future. If omitted or unrecognized, <code>:float</code> is  assumed.</p></li>
  <li>
  <p><code>:centered</code> supplied with a true value requests that the gauge  displayed when adjusting this variable&rsquo;s value be like a pan  gauge, showing deviation from a central value, for interfaces  which support this.</p></li>
  <li>
  <p><code>:resolution</code> specifies the smallest amount by which the variable will be incremented or decremented when the user adjusts it using a continuous encoder on a physical controller. If not specified the resolution is up to the controller, but 1/256 of the range from <code>:min</code> to <code>:max</code> is a recommended default implementation, since that allows access to the full DMX parameter space for channel-oriented values.</p></li>
  <li>
  <p><code>:velocity</code> accompanied by a true value enables the variable to be set by strike pressure and adjusted by aftertouch pressure while the pad which launched the cue is held down on pressure-sensitive controllers.</p></li>
  <li>
  <p><code>:velocity-min</code> and <code>:velocity-max</code> specify the range into which MIDI velocity and aftertouch values will be mapped, if they are present. Otherwise the standard <code>:min</code> and <code>:max</code> values will be used.</p></li>
</ul></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L21">view source</a></div></div><div class="public anchor" id="var-find-cue-variable-keyword"><h3>find-cue-variable-keyword</h3><div class="usage"><code>(find-cue-variable-keyword cue var-spec &amp; {:keys [controller when-id]})</code></div><div class="doc"><div class="markdown"><p>Finds the keyword by which a cue variable is accessed; it may be directly bound to a show variable, or may be a temporary variable introduced for the cue, whose name needs to be looked up in the running effect&rsquo;s variable map. If a temporary variable, the id of the effect which is expected to be running for the cue must be passed with <code>:when-id</code>, and this id must match the id of the actual effect currently running under that key, or <code>nil</code> will be returned.</p>
<p>If a controller is passed with the <code>:controller</code> optional keyword argument, the effect is looked up in the show associated with that controller. Otherwise, it is looked up in the default show.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L294">view source</a></div></div><div class="public anchor" id="var-function-cue"><h3>function-cue</h3><div class="usage"><code>(function-cue show-key function fixtures &amp; {:keys [level htp? effect-name short-name color end-keys priority held velocity velocity-min velocity-max], :or {color :white, level 0, priority 0}})</code></div><div class="doc"><div class="markdown"><p>Creates a cue that applies the specified function to the supplied fixtures or heads. Automatically adds a temporary variable for adjusting the function value if the function is not fixed over its range. <code>show-key</code> will be used as the effect keyword when the cue is triggered to add it to a show, ending any existing effect that was using that key. <code>function</code> identifies the fixture function to be activated by this cue, and <code>fixtures</code> lists the fixtures and heads can which should be affected (though only fixtures and heads which implement the specified function will actually participate).</p>
<p>Passing a value for <code>:effect-name</code> sets the name for the effect created by this cue. If none is provided, the name of the function is used.</p>
<p>If supplied, <code>:short-name</code> identifies a compact, user-oriented name to be displayed in the web interface or controller display (if it has one) to help identify the cue, which can be helpful if the name of the underlying effect is ambiguous or overly long.</p>
<p><code>:color</code> requests that the web interface and control surfaces draw the cue using the specified color rather than the default white to help the user identify it. This is only a request, as not all control surfaces support all (or any) colors. The color is passed to <a href="afterglow.effects.params.html#var-interpret-color">interpret-color</a>, so it can be specified in a variety of ways.</p>
<p><code>:level</code> can be used to set the initial level for functions which have a variable effect over their range. Such functions will be automatically assigned a variable parameter which can be used to adjust the level while the cue runs, and which will be visible in the web interface and on controllers which support adjusting cue parameters. Function levels are expressed as a percentage, which is mapped onto the range of DMX values which are assigned to the function in the fixture definition. Functions with no variable effect will ignore <code>:level</code> and will not be assigned variables for adjustment.</p>
<p>If <code>:htp</code> is passed a true value, the created effect applies highest-takes-precedence (i.e. compares the value to the previous assignment for the channels implementing the function, and lets the highest value remain). See <a href="afterglow.effects.channel.html#var-function-effect">channel/function-effect</a> for more details about the underlying effect.</p>
<p><code>:end-keys</code> introduces a sequence of keywords identifying other effects which should be ended whenever this one is started. This allows a set of grid cues to be set up as mutually exclusive, even if they use different keywords within the show for other reasons.</p>
<p><code>:priority</code> assigns a sorting priority to the effect. If not assigned, a default priority of zero is used. The effect will be added to the show after any effects of equal or lower priority, but before any with higher priority. Effects are run in order, and later effects can override earlier ones if they are trying to affect the same things, so a higher priority and more recent effect wins.</p>
<p>If <code>:held</code> is passed with a true value, then the cue will be active only as long as the corresponding pad or button on the control surface is held down, for controllers which support this feature. This can be useful for very intense cues like strobes. Show operators can override the <code>:held</code> flag by holding down the <code>Shift</code> key when triggering the cue on interfaces which have <code>Shift</code> keys, like the web interface and Ableton Push.</p>
<p>If the function being controlled has a variable effect, and thus a cue variable is being introduced to adjust it, <code>:velocity</code>, <code>:velocity-min</code>, and <code>:velocity-max</code> will be used when creating that variable, allowing it to be controlled by strike and aftertouch pressure on control surfaces which support that feature, as described in <a href="afterglow.effects.cues.html#var-cue">cue</a>.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L131">view source</a></div></div><div class="public anchor" id="var-get-cue-variable"><h3>get-cue-variable</h3><div class="usage"><code>(get-cue-variable cue var-spec &amp; {:keys [controller when-id]})</code></div><div class="doc"><div class="markdown"><p>Finds the current value of the supplied cue variable, which may be directly bound to a show variable, or may be a temporary variable introduced for the cue, whose name needs to be looked up in the running effect&rsquo;s variable map. If a temporary variable, the id of the effect which is expected to be running for the cue must be passed with <code>:when-id</code>, and this id must match the id of the actual effect currently running under that key, or <code>nil</code> will be returned.</p>
<p>Permanent variables associated with the cue can always be retrieved by omitting <code>:with-id</code>. If you want to only get the variable when a particular effect is running, however, you can do so by passing in that effect&rsquo;s id with <code>:with-id</code>, and the same restriction will then be applied as is for temporary variables.</p>
<p>If a controller is passed with the <code>:controller</code> optional keyword argument, the effect is looked up in the show associated with that controller. Otherwise, it is looked up in the default show.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L317">view source</a></div></div><div class="public anchor" id="var-remove-midi-control-to-cue-mapping"><h3>remove-midi-control-to-cue-mapping</h3><div class="usage"><code>(remove-midi-control-to-cue-mapping device-filter channel kind note x y f)</code></div><div class="doc"><div class="markdown"><p>Stop triggering the specified cue from the <a href="afterglow.show-context.html#var-*show*">*show*</a> cue grid upon receipt of the specified note or controller-change message. The desired cue is identified by passing in its <code>x</code> and <code>y</code> coordinates within the show cue grid. <code>f</code> is the handler function that was returned by <a href="afterglow.effects.cues.html#var-add-midi-control-to-cue-mapping">add-midi-control-to-cue-mapping</a> when the mapping was established.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L452">view source</a></div></div><div class="public anchor" id="var-set-cue-variable.21"><h3>set-cue-variable!</h3><div class="usage"><code>(set-cue-variable! cue var-spec value &amp; {:keys [controller when-id]})</code></div><div class="doc"><div class="markdown"><p>Sets the current value of the supplied cue variable, which may be directly bound to a show variable, or may be a temporary variable introduced for the cue, whose name needs to be looked up in the running effect&rsquo;s variable map. If a temporary variable, the id of the effect which is expected to be running for the cue must be passed with <code>:when-id</code>, and this id must match the id of the actual effect currently running under that key, or nothing will be set.</p>
<p>Permanent variables associated with the cue can always be set by omitting <code>:with-id</code>. If you want to only affect the variable when a particular effect is running, however, you can do so by passing in that effect&rsquo;s id with <code>:with-id</code>, and the same restriction will then be applied as is for temporary variables.</p>
<p>If a controller is passed with the <code>:controller</code> optional keyword argument, the effect is looked up in the show associated with that controller. Otherwise, it is looked up in the default show.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/cues.clj#L339">view source</a></div></div></div></body></html>