<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects.channel documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Afterglow</span> <span class="project-version">0.2.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.beyond.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beyond</span></div></a></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mini.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mini</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-mk2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-mk2</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-pro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-pro</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.tempo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempo</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.coremidi4j.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coremidi4j</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch current"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.cues.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cues</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-3"><a href="afterglow.effects.show-variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-variable</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.american-dj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>american-dj</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.qxf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qxf</span></div></a></li><li class="depth-2 branch"><a href="afterglow.init.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shows</span></div></div></li><li class="depth-3"><a href="afterglow.shows.sallie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sallie</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="afterglow.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.show-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-control</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.web-repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web-repl</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.channel.html#var-apply-channel-value"><div class="inner"><span>apply-channel-value</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-channel-assigner"><div class="inner"><span>build-channel-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-fixed-channel-effect"><div class="inner"><span>build-fixed-channel-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-function-assigner"><div class="inner"><span>build-head-function-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-function-assigners"><div class="inner"><span>build-head-function-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-parameter-function-assigner"><div class="inner"><span>build-head-parameter-function-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-parameter-function-assigners"><div class="inner"><span>build-head-parameter-function-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-raw-channel-assigners"><div class="inner"><span>build-raw-channel-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-channel-effect"><div class="inner"><span>channel-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-find-heads-with-function"><div class="inner"><span>find-heads-with-function</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-effect"><div class="inner"><span>function-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-percentage-to-dmx"><div class="inner"><span>function-percentage-to-dmx</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-value-scaler"><div class="inner"><span>function-value-scaler</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-raw-channel-effect"><div class="inner"><span>raw-channel-effect</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">afterglow.effects.channel</h1><div class="doc"><div class="markdown"><p>Effects pipeline functions for working with individual DMX channels.</p></div></div><div class="public anchor" id="var-apply-channel-value"><h3>apply-channel-value</h3><div class="usage"><code>(apply-channel-value buffers channel value)</code></div><div class="doc"><div class="markdown"><p>A function which sets the DMX buffer value(s) for a channel, supporting fine channels as well (in which there is a high and low byte), using any fractional part of the value to determine the fine channel value if one is present.</p>
<p>Also supports inverted channels (as needed for some fixtures which have inverted dimmers). Such channels are specified by containing an <code>:inverted-from</code> key which specifies the DMX value at which inversion occurs. If the entire DMX range is inverted, in other words 0 represents the highest value and 255 the lowest, <code>:inverted-from</code> will be present with the value <code>0</code>. For dimmers which are still black at zero, but which leap to full brightness at 1 then dim as the value grows towards 255, <code>:inverted-from</code> will be present with the value <code>1</code>. Non-inverted channels will lack the key entirely.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L15">view source</a></div></div><div class="public anchor" id="var-build-channel-assigner"><h3>build-channel-assigner</h3><div class="usage"><code>(build-channel-assigner channel f)</code></div><div class="doc"><div class="markdown"><p>Returns an assigner which applies the specified assignment function to the supplied channel.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L43">view source</a></div></div><div class="public anchor" id="var-build-fixed-channel-effect"><h3>build-fixed-channel-effect</h3><div class="usage"><code>(build-fixed-channel-effect name level channels &amp; {:keys [htp?]})</code></div><div class="doc"><div class="markdown"><p>Returns an effect which simply assigns a fixed value to all the supplied channels. If htp? is true, applies highest-takes-precedence (i.e. compares the value to the previous assignment for the channel, and lets the highest value remain).</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L54">view source</a></div></div><div class="public anchor" id="var-build-head-function-assigner"><h3>build-head-function-assigner</h3><div class="usage"><code>(build-head-function-assigner function head assign-f)</code></div><div class="doc"><div class="markdown"><p>Returns a function assigner which applies the specified assignment function to the channels of the provided head or fixture which implement the specified named function. The head or fixture must (directly) have a channel implementing the named function.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L119">view source</a></div></div><div class="public anchor" id="var-build-head-function-assigners"><h3>build-head-function-assigners</h3><div class="usage"><code>(build-head-function-assigners function heads assign-f)</code></div><div class="doc"><div class="markdown"><p>Returns a list of function assigners type which apply an assignment function to the channel of all the supplied heads or fixtures which implement the specified named function. Each head or fixture must (directly) have a channel implementing the named function.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L127">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-function-assigner"><h3>build-head-parameter-function-assigner</h3><div class="usage"><code>(build-head-parameter-function-assigner function head param show snapshot)</code></div><div class="doc"><div class="markdown"><p>Returns an function assigner which applies a parameter to the channel of the supplied head or fixture which implements the specified named function. If the parameter is not frame-dynamic, it gets resolved when creating this assigner. Otherwise, resolution is deferred to frame rendering time. The head or fixture must (directly) have a channel implementing the named function.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L135">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-function-assigners"><h3>build-head-parameter-function-assigners</h3><div class="usage"><code>(build-head-parameter-function-assigners function heads param show)</code></div><div class="doc"><div class="markdown"><p>Returns a list of assigners which apply a parameter to the channel(s) of the supplied heads or fixtures which implement the specified named function. Each head or fixture must (directly) have a channel implementing the named function.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L147">view source</a></div></div><div class="public anchor" id="var-build-raw-channel-assigners"><h3>build-raw-channel-assigners</h3><div class="usage"><code>(build-raw-channel-assigners channels f)</code></div><div class="doc"><div class="markdown"><p>Returns a list of assigners which apply a channel assignment function to all the supplied channels.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L48">view source</a></div></div><div class="public anchor" id="var-channel-effect"><h3>channel-effect</h3><div class="usage"><code>(channel-effect effect-name level channels &amp; {:keys [htp?]})</code></div><div class="doc"><div class="markdown"><p>Returns an effect which assigns a dynamic value to all the supplied channels. If <code>level is a keyword, it will be looked up as a show
variable. If</code>htp?` is true, applies highest-takes-precedence (i.e. compares the value to the previous assignment for the channel, and lets the highest value remain).</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L67">view source</a></div></div><div class="public anchor" id="var-find-heads-with-function"><h3>find-heads-with-function</h3><div class="usage"><code>(find-heads-with-function function fixtures)</code></div><div class="doc"><div class="markdown"><p>Returns all heads of the supplied fixtures which have a channel that implements the specified function.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L156">view source</a></div></div><div class="public anchor" id="var-function-effect"><h3>function-effect</h3><div class="usage"><code>(function-effect effect-name function level fixtures &amp; {:keys [htp?]})</code></div><div class="doc"><div class="markdown"><p>Returns an effect which assigns a dynamic value to all channels of the supplied fixtures or heads which have a range that implements the specified function. (Functions are a way for fixtures to use the same DMX channel to do multiple things, allocating ranges of values to get more dense use from a smaller number of channel allocations.) The <code>function</code> argument is the keyword by which the function information will be found for the supplied <code>fixtures</code>. The actual value sent for the channel associated with <code>function</code> for each fixture will be calculated by treating <code>level</code> as a percentage of the way between the lowest and highest DMX values assigned to that named function for the fixture. The name displayed for the effect in user interfaces is determined by <code>effect-name</code>.</p>
<p>If <code>:htp?</code> is passed with a <code>true</code> value, applies highest-takes-precedence (i.e. compares the value to the previous assignment for the channels implementing the function, and lets the highest value remain).</p>
<p>If you have multiple effects trying to control different functions which use the same channel, you are unlikely to get the results you want. Hopefully the fixture designers chose how to share channels wisely, avoiding this pitfall.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L162">view source</a></div></div><div class="public anchor" id="var-function-percentage-to-dmx"><h3>function-percentage-to-dmx</h3><div class="usage"><code>(function-percentage-to-dmx percent function-spec)</code></div><div class="doc"><div class="markdown"><p>Given a percentage value and a named function specfication which identifies a range of DMX channel values, scales the percentage into that range. If the function spec has a value scaler function attached to it (via the key <code>:scale-fn</code>), call that with the value to get the percentage before scaling it to the DMX range.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L215">view source</a></div></div><div class="public anchor" id="var-function-value-scaler"><h3>function-value-scaler</h3><div class="usage"><code>(function-value-scaler range-min range-max value)</code></div><div class="doc"><div class="markdown"><p>Converts a named function value from an arbitrary range to a percentage along that range. Designed to be partially applied in a fixture definition, so <a href="afterglow.effects.channel.html#var-function-percentage-to-dmx">function-percentage-to-dmx</a> can pass the value being resolved as the last parameter.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L202">view source</a></div></div><div class="public anchor" id="var-raw-channel-effect"><h3>raw-channel-effect</h3><div class="usage"><code>(raw-channel-effect effect-name f channels)</code></div><div class="doc"><div class="markdown"><p>Returns an effect which simply calls a function to obtain the current level for all the supplied channels, runs forever, and ends immediately when requested.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L88">view source</a></div></div></div></body></html>