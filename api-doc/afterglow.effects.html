<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Afterglow</span> <span class="project-version">0.2.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.beyond.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beyond</span></div></a></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.controllers.launchpad-pro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launchpad-pro</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.tempo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempo</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.coremidi4j.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coremidi4j</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2 current"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.cues.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cues</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-3"><a href="afterglow.effects.show-variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-variable</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.american-dj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>american-dj</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.qxf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qxf</span></div></a></li><li class="depth-2 branch"><a href="afterglow.init.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shows</span></div></div></li><li class="depth-3"><a href="afterglow.shows.sallie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sallie</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="afterglow.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.show-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-control</span></div></a></li><li class="depth-4 branch"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.web-repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web-repl</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.html#var--.3EAssigner"><div class="inner"><span>-&gt;Assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var--.3EAssignment"><div class="inner"><span>-&gt;Assignment</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var--.3EEffect"><div class="inner"><span>-&gt;Effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-always-active"><div class="inner"><span>always-active</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-blank"><div class="inner"><span>blank</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-build-head-assigner"><div class="inner"><span>build-head-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-build-head-assigners"><div class="inner"><span>build-head-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-build-head-parameter-assigner"><div class="inner"><span>build-head-parameter-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-build-head-parameter-assigners"><div class="inner"><span>build-head-parameter-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-chase"><div class="inner"><span>chase</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-code"><div class="inner"><span>code</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-conditional-effect"><div class="inner"><span>conditional-effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-end-immediately"><div class="inner"><span>end-immediately</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-fade"><div class="inner"><span>fade</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-fade-assignment"><div class="inner"><span>fade-assignment</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-fade-between-assignments"><div class="inner"><span>fade-between-assignments</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-IAssigner"><div class="inner"><span>IAssigner</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html#var-assign"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>assign</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-IEffect"><div class="inner"><span>IEffect</span></div></a></li><li class="depth-2 branch"><a href="afterglow.effects.html#var-end"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>end</span></div></a></li><li class="depth-2 branch"><a href="afterglow.effects.html#var-generate"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generate</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html#var-still-active.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>still-active?</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-map-.3EAssigner"><div class="inner"><span>map-&gt;Assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-map-.3EAssignment"><div class="inner"><span>map-&gt;Assignment</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-map-.3EEffect"><div class="inner"><span>map-&gt;Effect</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-resolve-assignment"><div class="inner"><span>resolve-assignment</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-run-assigners"><div class="inner"><span>run-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.html#var-scene"><div class="inner"><span>scene</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">afterglow.effects</h1><div class="doc"><div class="markdown"><p>Support functions for building the effects pipeline.</p></div></div><div class="public anchor" id="var--.3EAssigner"><h3>-&gt;Assigner</h3><div class="usage"><code>(-&gt;Assigner kind target-id target f)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class afterglow.effects.Assigner.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L64">view source</a></div></div><div class="public anchor" id="var--.3EAssignment"><h3>-&gt;Assignment</h3><div class="usage"><code>(-&gt;Assignment kind target-id target value)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class afterglow.effects.Assignment.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L74">view source</a></div></div><div class="public anchor" id="var--.3EEffect"><h3>-&gt;Effect</h3><div class="usage"><code>(-&gt;Effect name active-fn gen-fn end-fn)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class afterglow.effects.Effect.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L90">view source</a></div></div><div class="public anchor" id="var-always-active"><h3>always-active</h3><div class="usage"><code>(always-active show snapshot)</code></div><div class="doc"><div class="markdown"><p>An implementation of <a href="afterglow.effects.html#var-still-active.3F">still-active?</a> which simply always returns <code>true</code>, useful for effects which run until you ask them to end.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L100">view source</a></div></div><div class="public anchor" id="var-blank"><h3>blank</h3><div class="usage"><code>(blank)</code><code>(blank effect-name)</code></div><div class="doc"><div class="markdown"><p>Create an effect which does nothing. This can be useful, for example, when you want to use <a href="afterglow.effects.html#var-fade">fade</a> to fade into an effect from a state where there was simply nothing happening (or where earlier and lower-priority effects can show through). If you want the blank effect to have a particular name, for example you are using it to set shared cue variables, you can pass a string argument.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L170">view source</a></div></div><div class="public anchor" id="var-build-head-assigner"><h3>build-head-assigner</h3><div class="usage"><code>(build-head-assigner kind head f)</code></div><div class="doc"><div class="markdown"><p>Returns an assigner of the specified type which applies the specified assignment function to the provided head or fixture.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L113">view source</a></div></div><div class="public anchor" id="var-build-head-assigners"><h3>build-head-assigners</h3><div class="usage"><code>(build-head-assigners kind heads f)</code></div><div class="doc"><div class="markdown"><p>Returns a list of assigners of the specified type which apply an assignment function to all the supplied heads or fixtures.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L119">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-assigner"><h3>build-head-parameter-assigner</h3><div class="usage"><code>(build-head-parameter-assigner kind head param show snapshot)</code></div><div class="doc"><div class="markdown"><p>Returns an assigner of the specified kind which applies a parameter to the supplied head or fixture. If the parameter is not frame-dynamic, it gets resolved when creating this assigner. Otherwise, resolution is deferred to frame rendering time.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L125">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-assigners"><h3>build-head-parameter-assigners</h3><div class="usage"><code>(build-head-parameter-assigners kind heads param show)</code></div><div class="doc"><div class="markdown"><p>Returns a list of assigners of the specified kind which apply a parameter to all the supplied heads or fixtures.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L134">view source</a></div></div><div class="public anchor" id="var-chase"><h3>chase</h3><div class="usage"><code>(chase chase-name effects position &amp; {:keys [beyond], :or {beyond :blank}})</code></div><div class="doc"><div class="markdown"><p>Create an effect which moves through a list of other effects based on the value of a <code>position</code> parameter. When <code>position</code> is <code>1</code>, the first effect in <code>effects</code> is used, <code>2</code> results in the second effect, and so on. Intermediate values produce a <a href="afterglow.effects.html#var-fade">fade</a> between the corresponding effects. The interpretation of values less than one or greater than the number of effects in <code>effects</code> depends on the value passed with the optional keyword argument <code>:beyond</code>. The default behavior (when <code>:beyond</code> is omitted or passed with <code>:blank</code>) is to treat any numbers outside the range of elements in <code>effects</code> as if they refer to <a href="afterglow.effects.html#var-blank">blank</a> effects. This makes it easy to fade into the first effect by having <code>position</code> grow from <code>0</code> to <code>1</code>, and to fade out of the last effect by having <code>position</code> grow from the number of elements in <code>effects</code> towards the next integer, at which point the final effect will be fully faded out. In this mode, when <code>position</code> resolves to a value less than zero, or greater than the number of effects in <code>effects</code> plus one, the chase will end. So a chase which fades in, fades between its effects, fades out, and ends, can be implemented by simply passing in a variable parameter for <code>position</code> which smoothly grows from zero as time goes on.</p>
<p>Of course <code>position</code> needs to be a dynamic parameter for the chase to progress over time; <a href="afterglow.effects.params.html#var-build-step-param">build-step-param</a> is designed to conveniently create parameters for controlling chases in time with the show metronome. They can also be controlled by a dial on a physical controller that is bound to a show variable.</p>
<p>Passing a value of <code>:loop</code> with the optional keyword argument <code>:beyond</code> causes the chase to treat <code>effects</code> as if it was an infinite list of copies of itself, so once the final effect is reached, the chase begins fading into the first effect again, and so on. Similarly, if <code>position</code> drops below <code>1</code>, the chase starts fading in to the final effect. In this mode the chase continues until all of its underlying effects have ended (either on their own, or because they were asked to end by the operator), or <code>position</code> resolves to <code>nil</code>, which kills it instantly.</p>
<p>Finally, passing <code>:bounce</code> with <code>:beyond</code> is similar to <code>:loop</code>, except that every other repetition of the list of effects is traversed in reverse order. In other words, if <code>position</code> keeps growing steadily in value, and there are three effects in <code>effects</code>, with a <code>:beyond</code> value of <code>:loop</code> you will see them in the order 1 → 2 → 3 → 1 → 2 → 3 → 1… while a value of <code>:bounce</code> would give you 1 → 2 → 3 → 2 → 1 → 2 → 3 → 2….</p>
<p>Any element of <code>effects</code> can be a <a href="afterglow.effects.html#var-scene">scene</a>, grouping many other effects, or <a href="afterglow.effects.html#var-blank">blank</a>, which will temporarily defer to whatever else was happening before the chase was activated.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L442">view source</a></div></div><div class="public anchor" id="var-code"><h3>code</h3><div class="usage"><code>(code f)</code></div><div class="doc"><div class="markdown"><p>An effect which simply calls a function, then ends immediately, to allow arbitrary code to be easily run from the cue grid, for example to reset the metronome if the controller mapping doesn’t have a dedicated button for that.</p>
<p><code>f</code> must be a function which takes two arguments. It will be called with the show and metronome snapshot a single time, when the effect is first launched. It must return immediately, because this is taking place on the effect rendering pipeline, so any lengthy operations must be performed on another thread.</p>
<p>The effect stays running until asked to end, so that grid controllers can give visual feedback that it was started, but it doesn’t do anyting more after calling the function once when it starts.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L186">view source</a></div></div><div class="public anchor" id="var-conditional-effect"><h3>conditional-effect</h3><div class="usage"><code>(conditional-effect effect-name condition effect)</code></div><div class="doc"><div class="markdown"><p>Create an effect which makes the output of another effect conditional on whether a parameter has a non-zero value. Very useful when combined with <a href="afterglow.effects.show-variable.html#var-variable-effect">variable-effect</a> which can set that value to turn parts of a scene on or off independently. When <code>condition</code> has the value <code>0</code>, this effect does nothing; when <code>condition</code> has any other value, this effect behaves exactly like the effect passed in as <code>effect</code>.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L282">view source</a></div></div><div class="public anchor" id="var-end-immediately"><h3>end-immediately</h3><div class="usage"><code>(end-immediately show snapshot)</code></div><div class="doc"><div class="markdown"><p>An implementation of <a href="afterglow.effects.html#var-end">end</a> which just reports that the effect is now finished by returning <code>true</code>. Useful for effects which can simply be removed as soon as they are asked to end.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L106">view source</a></div></div><div class="public anchor" id="var-fade"><h3>fade</h3><div class="usage"><code>(fade fade-name from-effect to-effect phase)</code></div><div class="doc"><div class="markdown"><p>Create an effect which fades between two other effects as the value of a parameter changes from zero to one. When <code>phase</code> is <code>0</code> (or less), this effect simply acts as if it were <code>from-effect</code>. When <code>phase</code> is <code>1</code> (or greater), this effect acts like <code>to-effect</code>. For values of <code>phase</code> between <code>0</code> and <code>1</code>, a proportional linear blend between <code>from-effect</code> and <code>to-effect</code> is created, so that at <code>0.5</code> each effect contributes the same amount.</p>
<p>Of course <code>phase</code> can be a dynamic parameter; interesting results can be obtained with oscillated and variable parameters. And either or both of the effects being faded between can be a scene, grouping many other effects.</p>
<p>One of the effects may also be <a href="afterglow.effects.html#var-blank">blank</a>, which allows the other effect to be faded into or out of existence. When fading to or from a blank effect, the fade allows any previous or lower-priority effects to pass through as it approaches the blank effect. The same is true when fading between effects that do not include all the same fixtures, or affect different aspects of fixtures.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L381">view source</a></div></div><div class="public anchor" id="var-fade-assignment"><h3>fade-assignment</h3><div class="usage"><code>(fade-assignment from-assignment to-assignment fraction show snapshot)</code></div><div class="doc"><div class="markdown"><p>Calculates an intermediate value between two attribute assignments of the same kind (e.g. color, direction, channel value) for an element of a light show. The values of <code>from-assignment</code> and <code>to-assignment</code> may either be instances of <code>afterglow.effects.Assignment</code> of the same <code>:kind</code>, or they may be <code>nil</code>, to indicate that the attribute is being faded to or from nothing. This function does the preparation and valiation needed in order to delegate safely to <a href="afterglow.effects.html#var-fade-between-assignments">fade-between-assignments</a> by promoting <code>nil</code> values to empty assignments of the appropriate <code>:kind</code> affecting the same target.</p>
<p>The amount contributed by each assignment is controlled by <code>fraction</code>, which can range from <code>0</code> (or less), meaning that only <code>from-assignment</code> is considered, to <code>1</code> (or greater), meaning that <code>to-assignment</code> is simply returned. Intermediate values will ideally result in a blend between the two assignments, with <code>0.5</code> representing an equal contribution from each. Since the value of the assignments may still be dynamic parameters, the show and snapshot might be needed to resolve them in order to calculate the blended value. Some kinds of assignment may not support blending, in which case the default implementation will simply switch from <code>from-assignment</code> to <code>to-assignment</code> once <code>fraction</code> reaches <code>0.5</code>.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L248">view source</a></div></div><div class="public anchor" id="var-fade-between-assignments"><h3>fade-between-assignments</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Calculates an intermediate value between two attribute assignments of the same kind (e.g. color, direction, channel value) for an element of a light show. Most code will not call this directly, and will instead use the higher-level <a href="afterglow.effects.html#var-fade-assignment">fade-assignment</a> function to help set it up, or simply use a full-blown <a href="afterglow.effects.html#var-fade">fade</a> effect. This is the low-level mechanism which performs the fade calculations by dispatching to an appropriate implementation based on the <code>:kind</code> value of <code>from-assignment</code>, and it requires both <code>from-assignment</code> and <code>to-assignment</code> to be non-<code>nil</code> instances of <code>afterglow.effects.Assignment</code> of the same <code>:kind</code>.</p>
<p>The amount contributed by each assignment is controlled by <code>fraction</code>, which can range from <code>0</code> (or less), meaning that only <code>from-assignment</code> is considered, to <code>1</code> (or greater), meaning that <code>to-assignment</code> is simply returned. Intermediate values will ideally result in a blend between the two assignments, with <code>0.5</code> representing an equal contribution from each. Since the value of the assignments may still be dynamic parameters, the show and snapshot might be needed to resolve them in order to calculate the blended value. Some kinds of assignment may not support blending, in which case the default implementation will simply switch from <code>from-assignment</code> to <code>to-assignment</code> once <code>fraction</code> reaches <code>0.5</code>.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L213">view source</a></div></div><div class="public anchor" id="var-IAssigner"><h3>IAssigner</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Assign some attribute (color, attitude, channel value) to an element of a light show at a given point in time. Any previous assignment to this element will be supplied as an argument, and may be tweaked or ignored as needs dictate. The target will be a subtree of the show’s fixtures, currently either a head or channel.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-assign"><h3>assign</h3><div class="usage"><code>(assign this show snapshot target previous-assignment)</code></div><div class="doc"><div class="markdown"><p>Calculate the value the show element should have at this moment in time. Return a value appropriate for the kind of assignment, e.g. color object, channel value.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L19">view source</a></div></div><div class="public anchor" id="var-IEffect"><h3>IEffect</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>The effect is the basic building block of an Afterglow light show. It generates a list of assignments that should be in effect at a given moment in the show. It can end on its own, or be asked to end. When asked, it may end immediately, or after some final activity, such as a fade.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-end"><h3>end</h3><div class="usage"><code>(end this show snapshot)</code></div><div class="doc"><div class="markdown"><p>The effect has been asked to end. It should arrange to finish as soon as possible; return <code>true</code> if it can end immediately, and it will be removed from the show. Otherwise it will be allowed to continue running as it performs its graceful shutdown until <a href="afterglow.effects.html#var-still-active.3F">still-active?</a> reuthrns <code>false</code>. If the user asks to end the effect a second time during htis process, however, it will simply be removed from the show at that time.</p></div></div></div><div class="public anchor" id="var-generate"><h3>generate</h3><div class="usage"><code>(generate this show snapshot)</code></div><div class="doc"><div class="markdown"><p>List the asignments needed to implement the desired effect at this moment in time. Must return a sequence of <code>afterglow.effects.Assigner</code> objects which will be merged into the current frame based on their kind, target, and the effect’s priority. If the effect currently has nothing to contribute, it may return an empty sequence.</p></div></div></div><div class="public anchor" id="var-still-active.3F"><h3>still-active?</h3><div class="usage"><code>(still-active? this show snapshot)</code></div><div class="doc"><div class="markdown"><p>An inquiry about whether this effect is finished, and can be cleaned up. A <code>false</code> return value will remove the effect from the show.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L33">view source</a></div></div><div class="public anchor" id="var-map-.3EAssigner"><h3>map-&gt;Assigner</h3><div class="usage"><code>(map-&gt;Assigner m__6522__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class afterglow.effects.Assigner, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L64">view source</a></div></div><div class="public anchor" id="var-map-.3EAssignment"><h3>map-&gt;Assignment</h3><div class="usage"><code>(map-&gt;Assignment m__6522__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class afterglow.effects.Assignment, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L74">view source</a></div></div><div class="public anchor" id="var-map-.3EEffect"><h3>map-&gt;Effect</h3><div class="usage"><code>(map-&gt;Effect m__6522__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class afterglow.effects.Effect, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L90">view source</a></div></div><div class="public anchor" id="var-resolve-assignment"><h3>resolve-assignment</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Translates an attribute assignment (e.g. color, direction, channel value) for an element of a light show to the actual DMX values that will implement it. Since the value of the assignment may still be a dynamic parameter, the show and snapshot might be needed to resolve it.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L78">view source</a></div></div><div class="public anchor" id="var-run-assigners"><h3>run-assigners</h3><div class="usage"><code>(run-assigners show snapshot assigners)</code><code>(run-assigners show snapshot assigners previous-assignment)</code></div><div class="doc"><div class="markdown"><p>Returns the final assignment value that results from iterating over an assigner list that was gathered for a particular kind and target ID, feeding each intermediate result to the next assigner in the chain.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L314">view source</a></div></div><div class="public anchor" id="var-scene"><h3>scene</h3><div class="usage"><code>(scene scene-name &amp; effects)</code></div><div class="doc"><div class="markdown"><p>Create an effect which combines multiple effects into one.</p>
<p>Scenes are a way to group a list of effects to run as a single effect. All of their assigners are combined into a single list, in the order in which the effects were added to the scene. Because of the way Afterglow evaluates assigners, that means that if any constituent effects try to assign to the same target, the later ones will have a chance to override or blend with the earlier ones.</p></div></div><div class="src-link"><a href="https://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects.clj#L141">view source</a></div></div></div></body></html>