= Cues
James Elliott <james@deepsymmetry.org>
:icons: font

// Set up support for relative links on GitHub; add more conditions
// if you need to support other environments and extensions.
ifdef::env-github[:outfilesuffix: .adoc]

Cues are designed to support creating user interfaces for controlling
effects. They provide a convenient way to organize, identify, trigger,
adjust, and monitor effects. Each
http://deepsymmetry.org/afterglow/doc/afterglow.show.html[show] in
Afterglow maintains a cue grid, which can be viewed and interacted
with through the
http://deepsymmetry.org/afterglow/doc/afterglow.core.html#var-start-web-server[embedded
web interface] and MIDI controller mapping implementations which can
be
http://deepsymmetry.org/afterglow/doc/afterglow.show.html#var-register-grid-controller[registered
as grid controllers], like the
http://deepsymmetry.org/afterglow/doc/afterglow.controllers.ableton-push.html[Ableton
Push].

The cue grid is a two dimensional arrangement of cues, where the
bottom left corner is assigned coordinates `(0, 0)`. X coordinates
increase from left to right, and Y coordinates increase from bottom to
top. The web interface and registered grid controllers display 64 cues
at a time in an 8&times;8 grid, and can be scrolled around that grid.
The user can set the web interface to track the scroll position of a
registered grid controller. When that is done, scrolling either
interface will cause the other to scroll in the same way, so the
browser window can act as documentation to help the user learn what
the cue name associated with each available cue pad on the controller.

.Web interface cue grid
image::assets/ShowGrid.png[Web interface]

In addition to names, cues can be assigned colors in the grid, and the
web interface will honor those colors, as will the physical grid
controllers, within the limits of their capabilities. To provide
feedback about cue activation, a lightened version of the cue color is
displayed for cues which are currently active. And to help inform the
user about cue compatibility, any cues which are assigned the same
effect keyword, meaning they will terminate each other when launched,
will be displayed in a darkened color if an effect with that keyword
is currently running. Examples of both of these can be seen in the
first column of cues above, in which the &ldquo;All Dimmers&rdquo; cue
is active and displaying a lightened version of the yellow color
assigned to it, and the two cues above it, &ldquo;All Saw Down
Beat&rdquo; and &ldquo;All Saw Up 2 Beat&rdquo; use the same keyword
and so are displaying a darkened version of the yellow color. This is
a useful technique for building easy-to-learn cue grids. The same cues
are shown on the Ableton Push below, so you can see how the color
relationships help with learning the cue names.

.Ableton Push cue grid
image::assets/AbletonInterface.jpg[Ableton Push interface]

You can also trigger cues from simpler MIDI controllers which don't
register as grid controllers by explicitly mapping notes or control
changes to cues using
http://deepsymmetry.org/afterglow/doc/afterglow.show.html#var-add-midi-control-to-cue-mapping[afterglow.show/add-midi-control-to-cue-mapping].
Regardless of the mechanism by which a cue is triggered, the web
interface, a registered grid controller, or an explicitly mapped MIDI
note or control change, feedback will be sent to all interfaces so the
status of the cue will be represented consistently on all of them.

[[creating-cues]]
Creating Cues
~~~~~~~~~~~~~

The
http://deepsymmetry.org/afterglow/doc/afterglow.effects.cues.html[afterglow.effects.cues]
namespace provides functions for creating cues.

TODO: Describe the functions and arguments, link to effect examples.

[[controlling-cues]]
Controlling Cues
~~~~~~~~~~~~~~~~

The
http://deepsymmetry.org/afterglow/doc/afterglow.controllers.html[afterglow.controllers]
namespace defines some helpful functions for working with cues, and
defines a
http://deepsymmetry.org/afterglow/doc/afterglow.controllers.html#var-IGridController[grid
controller protocol] which rich controller mappings like the one for
the Ableton Push can use to attach themselves to a running show, and
synchronize with the web interface.

TODO: Flesh out, discuss individual functions.
