<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>afterglow.effects.channel documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Afterglow 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>afterglow</span></div></div></li><li class="depth-2 branch"><a href="afterglow.channels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channels</span></div></a></li><li class="depth-2"><a href="afterglow.controllers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controllers</span></div></a></li><li class="depth-3"><a href="afterglow.controllers.ableton-push.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ableton-push</span></div></a></li><li class="depth-2 branch"><a href="afterglow.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="afterglow.dj-link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dj-link</span></div></a></li><li class="depth-2"><a href="afterglow.effects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>effects</span></div></a></li><li class="depth-3 branch current"><a href="afterglow.effects.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.dimmer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimmer</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.fun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fun</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.movement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movement</span></div></a></li><li class="depth-3 branch"><a href="afterglow.effects.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3"><a href="afterglow.effects.params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-2 branch"><a href="afterglow.examples.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-2"><a href="afterglow.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="afterglow.fixtures.blizzard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blizzard</span></div></a></li><li class="depth-3"><a href="afterglow.fixtures.chauvet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chauvet</span></div></a></li><li class="depth-2 branch"><a href="afterglow.midi.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="afterglow.ola-client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ola-client</span></div></a></li><li class="depth-2 branch"><a href="afterglow.ola-messages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ola-messages</span></div></a></li><li class="depth-2 branch"><a href="afterglow.ola-service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ola-service</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rhythm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rhythm</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rpc-messages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rpc-messages</span></div></a></li><li class="depth-2 branch"><a href="afterglow.rpc-service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rpc-service</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show</span></div></a></li><li class="depth-2 branch"><a href="afterglow.show-context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>show-context</span></div></a></li><li class="depth-2 branch"><a href="afterglow.src-generator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>src-generator</span></div></a></li><li class="depth-2 branch"><a href="afterglow.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2 branch"><a href="afterglow.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></div></li><li class="depth-3 branch"><a href="afterglow.web.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-3 branch"><a href="afterglow.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-4 branch"><a href="afterglow.web.routes.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-4"><a href="afterglow.web.routes.visualizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualizer</span></div></a></li><li class="depth-3"><a href="afterglow.web.session.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="afterglow.effects.channel.html#var-apply-channel-value"><div class="inner"><span>apply-channel-value</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-channel-assigner"><div class="inner"><span>build-channel-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-fixed-channel-cue"><div class="inner"><span>build-fixed-channel-cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-function-assigner"><div class="inner"><span>build-head-function-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-function-assigners"><div class="inner"><span>build-head-function-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-parameter-function-assigner"><div class="inner"><span>build-head-parameter-function-assigner</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-head-parameter-function-assigners"><div class="inner"><span>build-head-parameter-function-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-build-raw-channel-assigners"><div class="inner"><span>build-raw-channel-assigners</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-channel-assignment-resolver"><div class="inner"><span>channel-assignment-resolver</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-channel-cue"><div class="inner"><span>channel-cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-find-heads-with-function"><div class="inner"><span>find-heads-with-function</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-assignment-resolver"><div class="inner"><span>function-assignment-resolver</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-cue"><div class="inner"><span>function-cue</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-percentage-to-dmx"><div class="inner"><span>function-percentage-to-dmx</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-function-value-scaler"><div class="inner"><span>function-value-scaler</span></div></a></li><li class="depth-1"><a href="afterglow.effects.channel.html#var-raw-channel-cue"><div class="inner"><span>raw-channel-cue</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">afterglow.effects.channel</h2><div class="doc"><pre class="plaintext">Effects pipeline functions for working with individual DMX channels.
</pre></div><div class="public anchor" id="var-apply-channel-value"><h3>apply-channel-value</h3><div class="usage"><code>(apply-channel-value buffers channel value)</code></div><div class="doc"><pre class="plaintext">A function which sets the DMX buffer value(s) for a channel, supporting fine channels
as well (in which there is a high and low byte), using any fractional part of the value
to determine the fine channel if one is present.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L14">view source</a></div></div><div class="public anchor" id="var-build-channel-assigner"><h3>build-channel-assigner</h3><div class="usage"><code>(build-channel-assigner channel f)</code></div><div class="doc"><pre class="plaintext">Returns an assigner which applies the specified assignment function to the supplied channel.
</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L26">view source</a></div></div><div class="public anchor" id="var-build-fixed-channel-cue"><h3>build-fixed-channel-cue</h3><div class="usage"><code>(build-fixed-channel-cue name level channels &amp; {:keys [htp?]})</code></div><div class="doc"><pre class="plaintext">Returns an effect which simply assigns a fixed value to all the
supplied channels. If htp? is true, applies
highest-takes-precedence (i.e. compares the value to the previous
assignment for the channel, and lets the highest value remain).</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L37">view source</a></div></div><div class="public anchor" id="var-build-head-function-assigner"><h3>build-head-function-assigner</h3><div class="usage"><code>(build-head-function-assigner function head assign-f)</code></div><div class="doc"><pre class="plaintext">Returns a function assigner which applies the specified assignment
function to the channels of the provided head or fixture which
implement the specified named function. The head or fixture
must (directly) have a channel implementing the named function.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L86">view source</a></div></div><div class="public anchor" id="var-build-head-function-assigners"><h3>build-head-function-assigners</h3><div class="usage"><code>(build-head-function-assigners function heads assign-f)</code></div><div class="doc"><pre class="plaintext">Returns a list of function assigners type which apply an assignment
function to the channel of all the supplied heads or fixtures which
implement the specified named function. Each head or fixture
must (directly) have a channel implementing the named function.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L94">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-function-assigner"><h3>build-head-parameter-function-assigner</h3><div class="usage"><code>(build-head-parameter-function-assigner function head param show snapshot)</code></div><div class="doc"><pre class="plaintext">Returns an function assigner which applies a parameter to the
channel of the supplied head or fixture which implements the
specified named function. If the parameter is not frame-dynamic, it
gets resolved when creating this assigner. Otherwise, resolution is
deferred to frame rendering time. The head or fixture
must (directly) have a channel implementing the named function.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L102">view source</a></div></div><div class="public anchor" id="var-build-head-parameter-function-assigners"><h3>build-head-parameter-function-assigners</h3><div class="usage"><code>(build-head-parameter-function-assigners function heads param show)</code></div><div class="doc"><pre class="plaintext">Returns a list of assigners which apply a parameter to the
channel(s) of the supplied heads or fixtures which implement the
specified named function. Each head or fixture must (directly) have
a channel implementing the named function.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L114">view source</a></div></div><div class="public anchor" id="var-build-raw-channel-assigners"><h3>build-raw-channel-assigners</h3><div class="usage"><code>(build-raw-channel-assigners channels f)</code></div><div class="doc"><pre class="plaintext">Returns a list of assigners which apply a channel assignment
function to all the supplied channels.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L31">view source</a></div></div><div class="public anchor" id="var-channel-assignment-resolver"><h3>channel-assignment-resolver</h3><div class="usage"><code>(channel-assignment-resolver show buffers snapshot target assignment _)</code></div><div class="doc"><pre class="plaintext">Resolves the assignment of a level to a single DMX channel.
</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L79">view source</a></div></div><div class="public anchor" id="var-channel-cue"><h3>channel-cue</h3><div class="usage"><code>(channel-cue name level channels &amp; {:keys [htp?]})</code></div><div class="doc"><pre class="plaintext">Returns an effect which assigns a dynamic value to all the supplied
channels. If htp? is true, applies highest-takes-precedence (i.e.
compares the value to the previous assignment for the channel, and
lets the highest value remain).</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L50">view source</a></div></div><div class="public anchor" id="var-find-heads-with-function"><h3>find-heads-with-function</h3><div class="usage"><code>(find-heads-with-function function fixtures)</code></div><div class="doc"><pre class="plaintext">Returns all heads of the supplied fixtures which have a channel
that implements the specified function.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L123">view source</a></div></div><div class="public anchor" id="var-function-assignment-resolver"><h3>function-assignment-resolver</h3><div class="usage"><code>(function-assignment-resolver show buffers snapshot target assignment target-id)</code></div><div class="doc"><pre class="plaintext">Resolves the assignment of a level to a named function on a head or
fixture.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L191">view source</a></div></div><div class="public anchor" id="var-function-cue"><h3>function-cue</h3><div class="usage"><code>(function-cue name function level fixtures &amp; {:keys [htp?]})</code></div><div class="doc"><pre class="plaintext">Returns an effect which assigns a dynamic value to all channels of
the supplied fixtures or heads which have a range that implements
the specified function. (Functions are a way for fixtures to use the
same DMX channel to do multiple things, allocating ranges of values
to get more dense use from a smaller number of channel
allocations.)

If htp? is true, applies highest-takes-precedence (i.e. compares the
value to the previous assignment for the channels implementing the
function, and lets the highest value remain).

If you have multiple effects trying to control different functions
which use the same channel, you are unlikely to get the results you
want. Hopefully the fixture designers chose how to share channels
wisely, avoiding this pitfall.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L129">view source</a></div></div><div class="public anchor" id="var-function-percentage-to-dmx"><h3>function-percentage-to-dmx</h3><div class="usage"><code>(function-percentage-to-dmx percent function-spec)</code></div><div class="doc"><div class="markdown"><p>Given a percentage value and a named function specfication which identifies a range of DMX channel values, scales the percentage into that range. If the function spec has a value scaler function attached to it (via the key <code>:scale-fn</code>), call that with the value to get the percentage before scaling it to the DMX range.</p></div></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L176">view source</a></div></div><div class="public anchor" id="var-function-value-scaler"><h3>function-value-scaler</h3><div class="usage"><code>(function-value-scaler range-min range-max value)</code></div><div class="doc"><div class="markdown"><p>Converts a named function value from an arbitrary range to a percentage along that range. Designed to be partially applied in a fixture definition, so <a href="afterglow.effects.channel.html#var-function-percentage-to-dmx">function-percentage-to-dmx</a> can pass the value being resolved as the last parameter.</p></div></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L162">view source</a></div></div><div class="public anchor" id="var-raw-channel-cue"><h3>raw-channel-cue</h3><div class="usage"><code>(raw-channel-cue name f channels)</code></div><div class="doc"><pre class="plaintext">Returns an effect which simply calls a function to obtain the
current level for all the supplied channels, runs forever, and ends
immediately when requested.</pre></div><div class="src-link"><a href="http://github.com/brunchboy/afterglow/blob/master/src/afterglow/effects/channel.clj#L70">view source</a></div></div></div></body></html>